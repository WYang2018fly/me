# 一 概述

## 1.1 简介

### 1.1.1 软硬件概念

#### 硬件(Hardware)

> 计算机的实体部分，由看得见摸得着的各种电子元器件组成

#### 软件(Software)

> 看不见摸不着，由人类事先编制的具有各类特殊功能的程序组成

- ##### 系统软件(System software)

  (1) 主要用来管理整个计算机系统，监视服务，使系统资源得到合理调度，高效运行

  (2) 包括: 

  ​			标准程序库     

  ​			语言处理程序（汇编程序：汇编语言翻译成机器语言；编译程序：高级语言翻译成机器语言）    

  ​			操作系统（批处理系统、分时系统、实时系统等）    

  ​			服务程序（诊断程序，调试程序，连接程序等）   

  ​		    数据库管理系统    

  ​			网络软件    

  ​            ......

- ##### 应用软件(Application software)

  用户根据任务需要所编制的各种程序（科学计算程序，数据处理程序，过程控制程序，事务管理程序等）



### 1.1.2 层次结构

> 计算机的解题过程：
>
> 源程序（用户编写的高级语言程序）——> 目标程序（机器语言程序）——> Execute ——> Result

- #### **单层**

  机器语言程序（二进制代码0,1）直接在实际机器M1上运行

- #### **两层**

  20世纪50年代开始出现符号式的程序设计语言（汇编语言） 

  用符号表示加减乘除（ADD、SUB、MUL、DIV），指令或数据所在存储单元的地址 

  

  具有两级层次结构的计算机系统： 

  第二级：虚拟机器M2（汇编语言机器：具有翻译功能，将汇编语言 → 机器语言，输入给M1执行）      

  ​     ↓  

  第一级：实际机器M1（机器语言机器：执行机器语言，将结果输出）

- #### **三层**

  汇编语言仍是一种面向实际机器的语言（每一条语句与机器语言一一对应）                    

  ​                →摆脱不了实际机器的指令系统                        

  ​                     → 没有通用性（每台机器都必须有一种与之相对的汇编语言） 

  20世纪60年代，高级语言（Fortran、Basic、Pascal、C）开始出现

  

  具有三级层次结构的计算机系统： 

  第三级：虚拟机器M3（高级语言机器：高级语言→汇编语言或其他中间语言程序，输入给M2执行或直接给M1执行）      

  ​     ↓ 

  第二级：虚拟机器M2（汇编语言机器：具有翻译功能，将汇编语言 → 机器语言，输入给M1执行）     

  ​     ↓ 

  第一级：实际机器M1（机器语言机器：执行机器语言，将结果输出）

  

  - ##### 过渡: 翻译程序

    > 高级语言程序翻译成机器语言程序的软件

    - 编译程序

      源程序全部语句一次性翻译成机器语言程序，而后再执行 

      特点：源程序不变，无须再次进行翻译

    - 解释程序

      源程序的一条语句翻译成对应的一条机器语句，并立即执行这条语句，不停重复这个步骤，直至完成全部翻译任务 

      特点：翻译一次执行一次，即使下一次重复执行该语句时，也必须重新翻译

- #### **四层**

  由于软件的迅速发展，使实际机器M1向上延伸构成了各级虚拟机器。同理，机器M1内部也可向下延伸而形成下一级的微程序机器M0（一条机器指令翻译成一组微指令，即构成一个微程序） 

  M0可以看做是对M1的分解，即M0的微程序解释并执行M1的每一条机器指令 

  

  具有四级层次结构的计算机系统： 

  第三级：虚拟机器M3（高级语言机器：高级语言→汇编语言或其他中间语言程序，输入给M2执行或直接给M1执行）

  ​     ↓ 

  第二级：虚拟机器M2（汇编语言机器：具有翻译功能，将汇编语言 → 机器语言，输入给M1执行）

  ​     ↓  

  第一级：传统机器M1（机器语言机器：用微程序解释机器指令）

  ​     ↓

  第零级：微程序机器M0（微指令系统：由硬件直接执行微指令）

- #### 五层

  > 在实际机器M1与虚拟机器M2之间还有一级虚拟机器，由操作系统软件构成

  操作系统的作用： 

  （1）提供了汇编和高级语言在使用和实现过程中所需的某些基本操作 

  （2）控制并管理计算机系统全部硬件和软件资源

  操作系统的功能是通过其**控制语言**来实现的(??)

  

  具有五级层次结构的计算机系统： 

  第四级：虚拟机器M4（高级语言机器：高级语言→汇编语言或其他中间语言程序，输入给M2执行或直接给M1执行）

  ​      ↓ 

  第三级：虚拟机器M3（汇编语言机器：具有翻译功能，将汇编语言 → 机器语言，输入给M1执行）

  ​      ↓  

  第二级：虚拟机器M2（操作系统机器：用机器语言解释操作系统）

  ​      ↓ 

  第一级：传统机器M1（机器语言机器：用微程序解释机器指令）

  ​      ↓ 

  第零级：微程序机器M0（微指令系统：由硬件直接执行微指令）

  - ##### 划分: 软硬件

    > 硬件研究的主要对象：M0、M1
    >
    > 软件研究的主要对象：操作系统级以上的各级虚拟机

    划分并非一成不变，超大规模集成电路技术的不断发展，使得一部分软件功能将由硬件来实现 

    比如，操作系统已实现部分固化（把软件永恒地存于只读存储器(ROM)中），称为固件( firmware)

- #### 层级延伸

  虚拟机器M4向上延伸，构成**应用语言虚拟机**(?)

  这一层级是为使计算机满足某种用途而专门设计的，所用的语言是各种面向问题的应用语言（人工智能和计算机设计等方面的语言） 

  应用语言编写的程序一般由应用程序包翻译到虚拟机器M4上



### 1.1.3 体系结构和组成

- #### **体系结构**

  > 计算机体系结构可以理解为计算机系统的属性（概念性的结构与功能特性）—— 指令集、数据类型、存储器寻址技术、I/O机理......

  由于计算机系统具有多层次结构，不同层次的开发者所看到的计算机属性也各不相同

  两台不同的机器对于不同层次的开发者： 

  高级语言的开发者可以看作同一属性的机器（相同体系结构）， 而汇编语言的开发者所看到的计算机属性（指令集、数据类型、寻址技术......）都是完全不同的（不同体系结构）

- #### **组成**

  > 计算机组成指的是如何实现计算机体系结构体现的属性

  两台不同的机器，指令系统相同只能说具有相同的结构，具体到如何去实现其指令的功能，完全可以不同，即组成方式不同（实现乘法指令可以用一个专门的乘法电路，也可以采用连续的加法电路来实现）

  - **类比**：

    指令系统体现了机器的属性，属于计算机结构的问题 

    指令如何实现（取指、分析指令、取操作数、运算、送结果等），属于计算机组成的问题

  - **区分**：铁打的营盘流水的兵

    一种机器的体系结构可以维持多年，但机器的组成却会随着计算机技术的发展而不断变化



## 1.2 基本组成

### 1.2.1 冯·诺依曼机

> 1945年，数学家冯·诺依曼在研究EDVAC机时提出“存储程序”的概念，以此为基础的各类计算机通称von Neumann Machine

**特点**

（1）五大组成部分（运算器、存储器、控制器、输入设备、输出设备）

（2）指令与数据均用二进制(binary system)表示，以同等地位存放于存储器内并按地址寻访

（3）指令由操作码（操作的性质）和地址码（操作数在存储器中的位置）组成

（4）指令在存储器中按顺序存放，通常情况顺序执行，特定条件下根据运算结果或设定的条件改变执行顺序

（5）机器以运算器为中心，输入输出设备与存储器间的数据传送通过运算器完成

### 1.2.2 硬件框图

#### **冯·诺依曼机——以运算器为中心**

![VonNeumannMachine](https://github.com/WYang2018fly/me/blob/master/PrinciplesOfComputerComposition/images/VonNeumannMachine.png)

#### 现代计算机——以存储器为中心

![ModernComputer](https://github.com/WYang2018fly/me/blob/master/PrinciplesOfComputerComposition/images/ModernComputer.png)

- #### **各部件功能**

  运算器：算术运算和逻辑运算，并将运算的中间结果暂存在运算器内 

  存储器：存放数据和程序 

  控制器：控制、指挥程序和数据的输入、运行以及处理结果 

  输入设备：信息形式转换（人类熟悉→机器能识别，比如键鼠设备） 

  输出设备：将机器运算结果转换成人类熟悉的信息形式，比如打印机、显示器输出

  

  - ##### 组合：CPU和I/O设备

    由于运算器和控制器在逻辑关系和电路结构上联系十分紧密，大规模集成电路制作工艺出现后，这两大部件被集成在同一芯片上，统称**中央处理器**(Central Processing Unit,CPU)

    把输入设备与输出设备简称为**I/O设备**(Input/Output Equipment)

    
    
    于是，现代计算机可认为由三大部分组成：**CPU**、**I/O设备**及**主存储器**(Main Memory,MM)
    
    ![ModernComputer2](https://github.com/WYang2018fly/me/blob/master/PrinciplesOfComputerComposition/images/ModernComputer2.png)
    
    **核心部件**
    
    - 算术逻辑单元（ALU）简称算逻部件，用来完成算术逻辑运算
    
    - 控制单元（CU）用来解释存储器中的指令，并发出各种操作命令来执行指令；I/O设备也受CU控制，来完成相应的输入、输出操作
    
    
    
    **存储器（主存和辅存）**
    
    - 主存储器是存储器子系统中的一类，用来存放程序和数据，可以直接与CPU交换信息
    - 辅助存储器

### 1.2.3 工作步骤

- #### 准备

  （1）建立数学模型 

  （2）确定计算方法 

  （3）编制解题程序

  ​		  程序是适合于机器运算的全部步骤，编制解题程序就是将运算步骤用一一对应的机器指令描述

  - 举个🌰 ：计算ax^2+bx+c

    分解为八个步骤

    1. 将x取至运算器中

    2. 乘以x,得x^2,存于运算器中

    3. 再乘以a,得ax^2,存于运算器中

    4. 将ax^2送至存储器中

    5. 取b至运算器中

    6. 乘以x,得bx,存于运算器中

    7. 将ax^2从存储器中取出与bx相加,得ax^2+bx,存于运算器中

    8. 再取c与ax^2+bx相加,得ax^2+bx+c,存于运算器中

       - 简化步骤：ax^2+bx+c改写为(ax+b)x+c，只需五个步骤
         1. 将x取至运算器中
         2. 乘以a,得ax,存于运算器中
         3. 加b,得ax+b,存于运算器中
         4. 乘以x,得(ax+b)x,存于运算器中
         5. 加c,得(ax+b)x+c,存于运算器中

       - 转换为机器指令

         设某机器的指令字长为16位，其中操作码占6位，地址码占10位

         操作码：机器执行的各种操作（取数、存数、加减乘除、停机、打印等）

         地址码：参加运算的数在存储器内的位置

         **操作码与操作性质对应表**

         | opcode | character |                           content                            |
         | :----: | :-------: | :----------------------------------------------------------: |
         | 000001 |   取数    | 将指令地址码指示的存储单元中的操作数取到运算器的累加器ACC中  |
         | 000010 |   存数    |          将ACC中的数存至指令地址码指示的存储单元中           |
         | 000011 |    加     | 将ACC中的数与指令地址码指示的存储单元中的数相加，结果存于ACC中 |
         | 000100 |    乘     | 将ACC中的数与指令地址码指示的存储单元中的数相乘，结果存于ACC中 |
         | 000101 |   打印    |         将指令地址码指示的存储单元中的操作数打印输出         |
         | 000110 |   停机    |                                                              |

         **程序清单**（根据步骤转换成机器指令）

         | MM address(instruction) | opcode | address code |          annotation          |
         | :---------------------: | :----: | :----------: | :--------------------------: |
         |            0            | 000001 |  0000001000  |          取数x至ACC          |
         |            1            | 000100 |  0000001001  |     乘以a,得ax,存于ACC中     |
         |            2            | 000011 |  0000001010  |     加b,得ax+b,存于ACC中     |
         |            3            | 000100 |  0000001000  |  乘以x,得(ax+b)x,存于ACC中   |
         |            4            | 000011 |  0000001011  |  加c,得(ax+b)x+c,存于ACC中   |
         |            5            | 000010 |  0000001100  | 存数,将ax^2+bx+c存于主存单元 |
         |            6            | 000101 |  0000001100  |             打印             |
         |            7            | 000110 |      -       |             停机             |

         | MM address(data) | data | annotation |
         | :--------------: | :--: | :--------: |
         |        8         |  x   | 原始数据x  |
         |        9         |  a   | 原始数据a  |
         |        10        |  b   | 原始数据b  |
         |        11        |  c   | 原始数据c  |
         |        12        |      |  存放结果  |

         

- #### 运行

